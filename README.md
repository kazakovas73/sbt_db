# sbt_db
Repo for homework

# HW 4
# GREENPLUM
![image](https://github.com/kazakovas73/sbt_db/assets/71931438/00e01182-39be-46f6-ae94-b1f0147ca5f4)

Greenplum – open-source продукт, массивно-параллельная реляционная СУБД для хранилищ данных с гибкой горизонтальной масштабируемостью и столбцовым хранением данных на основе PostgreSQL. Благодаря своим архитектурным особенностям и мощному оптимизатору запросов, Гринплам отличается особой надежностью и высокой скоростью обработки SQL-запросов над большими объемами данных, поэтому эта MPP-СУБД широко применяется для аналитики Big Data в промышленных масштабах.

## История развития
- История развития СУБД Greenplum начинается в 2003 году, когда группа инженеров из Oracle основала компанию Greenplum с целью создания стабильной и масштабируемой платформы для анализа больших данных. Greenplum Database была одной из первых распределенных баз данных с открытым исходным кодом, оптимизированных для аналитики.
- В 2005 году Greenplum выпустила свою первую версию продукта — Greenplum Database 1.0. Она была разработана на основе PostgreSQL и включала расширения для поддержки больших таблиц, разделения таблиц и выполнения параллельных запросов.
- В 2008 году Greenplum выпустила второй основной релиз — Greenplum Database 2.0. В этой версии были представлены улучшенные возможности параллельной обработки данных, включая MPP-архитектуру (Массово-параллельная обработка), которая значительно улучшила производительность системы.
- В 2010 году VMware приобрел Greenplum и в дальнейшем развивал продукт в качестве открытой платформы для хранения и анализа данных.
- В 2012 году Greenplum Database 4.0 была выпущена с поддержкой расширенных функций для работы с данными, таких как JSON и Array, а также с улучшенными возможностями интеграции с Hadoop.
- В 2014 году Pivotal Software, совместное предприятие EMC и VMware, приобрело Greenplum и продолжило разработку и поддержку продукта.
- С 2015 года Greenplum активно развивает свою платформу для работы с данными машинного обучения, IoT и аналитики больших данных. В 2016 году вышла Greenplum Database 5.0, которая включала новые возможности для работы с данными в реальном времени и поддержку расширенных алгоритмов машинного обучения.
 - В 2018 году Greenplum выпустила Greenplum 6.0, в которой были представлены улучшенные возможности масштабирования и управления данными, а также поддержка Kubernetes для развертывания и управления кластерами Greenplum.
- На сегодняшний день Greenplum продолжает развиваться в качестве гибкой и масштабируемой платформы для анализа больших данных, предлагая новые возможности и улучшения для поддержки современных требований к данным и аналитике.

## Инструменты для взаимодействия с СУБД
- Клиентские приложения для работы с Greenplum, такие как DataGrip, DBeaver, SQL Workbench/J, Apache Zeppelin.
- Инструменты администрирования, такие как pgAdmin, Navicat, DbVisualizer.
- Библиотеки и драйверы для программирования на различных языках, такие как JDBC и ODBC драйверы, библиотека Greenplum-Python для Python.
- Интеграционные платформы и ETL-инструменты, такие как Apache NiFi, Talend, Pentaho.
- Бизнес-аналитические инструменты, такие как Tableau, Power BI, QlikView.
- Инструменты мониторинга и отладки производительности, такие как pg_stat_activity, Greenplum Command Center.

## Какой database engine используется в вашей СУБД?
В Greenplum используется движок базы данных PostgreSQL. Greenplum был разработан на основе PostgreSQL и использует его как основной database engine. Однако Greenplum расширяет и оптимизирует PostgreSQL для работы с многотерабайтными и крупномасштабными наборами данных, что делает его идеальным для аналитических задач и обработки больших объемов информации.

## Как устроен язык запросов в вашей СУБД? Разверните БД с данными и выполните ряд запросов. 
Greenplum поддерживает язык запросов SQL для работы с данными. Вот пример развёртывания базы данных с данными и выполнения ряда запросов:
1. Создание таблицы и загрузка данных:
```sql
CREATE TABLE employees (
    employee_id SERIAL PRIMARY KEY,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    department VARCHAR(50),
    salary NUMERIC
);

INSERT INTO employees (first_name, last_name, department, salary)
VALUES ('John', 'Doe', 'IT', 75000),
       ('Jane', 'Smith', 'Sales', 60000),
       ('Alice', 'Johnson', 'HR', 65000);
```

2. Запрос на выборку всех сотрудников:
```sql
SELECT * FROM employees;
```

3. Запрос на выборку сотрудников из отдела IT:
```sql
SELECT * FROM employees WHERE department = 'IT';
```

4. Запрос на изменение зарплаты сотрудника с employee_id = 1:
```sql
UPDATE employees SET salary = 80000 WHERE employee_id = 1;
```

5. Запрос на удаление сотрудника с employee_id = 2:
```sql
DELETE FROM employees WHERE employee_id = 2;
```

## Распределение файлов БД по разным носителям?
В Greenplum распределение файлов базы данных по разным носителям можно осуществить с помощью концепции сегментации (segmentation). В Greenplum, кластер базы данных состоит из множества сегментов, которые могут быть распределены по разным узлам и хранилищам данных.

Чтобы распределить файлы базы данных по разным носителям в Greenplum, можно изучить конфигурацию сегментации, которая определяет, какие сегменты будут находиться на каких узлах и хранилищах данных. Затем можно настроить эту конфигурацию сегментации, чтобы разнести файлы базы данных по разным носителям с целью балансировки нагрузки и повышения производительности работы с БД.

Для управления сегментацией и распределением файлов БД в Greenplum можно использовать специальные инструменты администрирования и конфигурации, такие как gp_toolkit или gp_configuration_history, а также команды SQL для работы с сегментами и распределением данных.

## На каком языке/ах программирования написана СУБД?
Greenplum написан на языке программирования C. Он использует ряд библиотек и инструментов на C для обеспечения высокой производительности и эффективности работы с данными в распределенной среде. Кроме того, Greenplum также использует SQL для запросов и управления данными.

## Какие типы индексов поддерживаются в greenplum? Приведите пример создания индексов.
Greenplum поддерживает несколько типов индексов, основные из которых включают в себя:
1. B-Tree индексы: наиболее распространенный тип индексов, который используется для ускорения поиска данных по ключевым полям.
2. Hash индексы: используют хэш-функции для быстрого поиска данных. Они могут быть полезны при выполнении операций соединения на больших объемах данных.
3. GIN (Generalized Inverted Index): поддерживают индексацию данных в столбцах с массивами или диапазонами значений.

Пример создания индекса в Greenplum:
1. Создание B-Tree индекса на таблице 'employees' для столбца 'last_name':
```sql
CREATE INDEX last_name_idx ON employees (last_name);
```

2. Создание Hash индекса на таблице 'orders' для столбца 'order_id':
```sql
CREATE INDEX order_id_idx ON orders USING hash (order_id);
```

3. Создание GIN индекса на таблице 'products' для столбца 'tags' (массив тегов):
```sql
CREATE INDEX product_tags_gin_idx ON products USING gin (tags);
```

## Как строится процесс выполнения запросов в greenplum?
Процесс выполнения запросов в Greenplum состоит из нескольких основных этапов:

1. Планирование запроса: В этом этапе Greenplum анализирует переданный SQL запрос и определяет оптимальный способ выполнения запроса. Для этого Greenplum использует статистику о данных и распределении данных в базе данных.
2. Распределение запроса: Запрос может быть распределен на выполнение на различные сегменты (части) базы данных для параллельного выполнения. Greenplum распределяет запрос таким образом, чтобы каждый сегмент выполнял свою часть работы и результаты объединялись в конечный результат.
3. Выполнение запроса: Каждый сегмент базы данных начинает выполнять свою часть запроса параллельно. Во время выполнения, Greenplum может использовать различные оптимизации, такие как фильтрация, сортировка и объединение результатов.
4. Объединение результатов и возврат данных: После того как все сегменты завершили выполнение запроса, Greenplum объединяет результаты и возвращает их пользователю.

## Есть ли для вашей СУБД понятие «план запросов»? Если да, объясните, как работает данный этап.
Да, для Greenplum существует понятие «план запросов». План запросов - это план выполнения запроса, который определяет порядок выполнения операций в запросе и способы доступа к данным для получения результата.

План запроса в Greenplum состоит из нескольких этапов выполнения запроса:
1. Парсинг запроса - анализ SQL запроса для определения его структуры и синтаксиса.
2. Анализ запроса - проверка запроса на наличие ошибок и оптимизация его выполнения.
3. Оптимизация запроса - определение оптимального плана выполнения запроса для минимизации времени выполнения и ресурсов.
4. Генерация и исполнение плана - создание конкретного плана выполнения запроса и его выполнение.

На этапе оптимизации запроса Greenplum использует статистику о таблицах и индексах, а также правила оптимизации, чтобы выбрать оптимальный план запроса. В результате получается план выполнения запроса, который дает наилучшую производительность при выполнении запроса.

## Поддерживаются ли транзакции в вашей СУБД? Если да, то расскажите о нем. Если нет, то существует ли альтернатива?
Да, в Greenplum поддерживаются транзакции. Транзакции в Greenplum работают по принципу ACID (атомарность, согласованность, изолированность, долговечность), что гарантирует целостность данных и их консистентность.

В рамках транзакции в Greenplum можно выполнять несколько операций с данными, и в случае возникновения ошибки в любой из операций, транзакция будет откатываться, чтобы избежать некорректного состояния базы данных.

## Какие методы восстановления поддерживаются в вашей СУБД. Расскажите о них.
Greenplum поддерживает несколько методов восстановления данных для обеспечения безопасности и защиты информации. Некоторые из основных методов восстановления в Greenplum включают:
1. Полное резервное копирование (Full Backup): Этот метод включает в себя создание полной копии всей базы данных Greenplum. При помощи полного резервного копирования можно восстановить базу данных целиком на момент создания резервной копии.
2. Инкрементное резервное копирование (Incremental Backup): Этот метод включает в себя создание копии только измененных данных с момента последнего резервного копирования. Это позволяет сократить время и объем для создания резервной копии.
3. Point-in-Time Recovery (PITR): Этот метод позволяет восстановить базу данных Greenplum до определенной точки во времени. При помощи PITR можно восстановить базу данных до момента совершения конкретной транзакции или события.
4. Архивирование WAL-файлов (Write-Ahead Logging): Greenplum поддерживает запись журналов (WAL-файлов), которые содержат изменения данных, сделанные с момента последнего резервного копирования. При необходимости, WAL-файлы могут быть использованы для восстановления базы данных Greenplum.

## Расскажите про шардинг в вашей конкретной СУБД. Какие типы используются? Принцип работы.
Greenplum поддерживает два типа шардинга: горизонтальный и вертикальный.

Горизонтальный шардинг разделяет данные по строкам, то есть каждая строка данных помещается на одном из узлов. Этот тип шардинга позволяет равномерно распределить данные по кластеру, что улучшает производительность запросов, так как запрос может быть параллельно выполняться на разных узлах.

Вертикальный шардинг разделяет данные по столбцам, то есть каждый столбец данных помещается на одном из узлов. Этот тип шардинга полезен, когда разные столбцы имеют различные требования к хранению или обработке. Например, высокообрабатываемые столбцы могут быть размещены на узлах с высокой производительностью, в то время как редко используемые столбцы могут быть размещены на более дешевых узлах.

Принцип работы шардинга в Greenplum заключается в том, что данные разделяются и распределяются по разным узлам в соответствии с выбранным типом шардинга. Запросы, обрабатываемые в кластере Greenplum, могут параллельно выполняться на разных узлах, что ускоряет обработку данных и повышает производительность системы в целом.

## Возможно ли применить термины Data Mining, Data Warehousing и OLAP в вашей СУБД?
Да, все три термина – Data Mining, Data Warehousing и OLAP (Online Analytical Processing) – могут быть применены в системе управления базами данных Greenplum. Greenplum представляет собой мощную платформу для анализа данных и отчетности, которая поддерживает различные методы анализа данных, включая Data Mining, Data Warehousing и OLAP. Здесь можно хранить, обрабатывать и анализировать большие объемы структурированных и неструктурированных данных, а также применять различные методы и технологии анализа данных для извлечения ценной информации из них.

## Какие методы защиты поддерживаются вашей СУБД? Шифрование трафика, модели авторизации и т.п.
Greenplum поддерживает различные методы защиты данных и обеспечения безопасности, включая:
1. Шифрование данных: Greenplum поддерживает шифрование данных в покое и в движении, что обеспечивает защиту данных от несанкционированного доступа. Можно использовать различные методы шифрования, такие как SSL для шифрования трафика между клиентом и сервером, а также Transparent Data Encryption (TDE) для шифрования данных на уровне хранения.
2. Модели авторизации и аутентификации: Greenplum предлагает различные методы управления доступом к данным, включая роли, привилегии и ACL (Access Control Lists). Можно настраивать различные уровни доступа к данным для пользователей и групп пользователей.
3. Аудит доступа к данным: Greenplum поддерживает механизмы аудита, позволяющие отслеживать и анализировать действия пользователей в системе. Можно настраивать аудит доступа к данным и анализировать журналы аудита для выявления возможных нарушений безопасности.
4. Защита от SQL-инъекций и других уязвимостей: Greenplum включает механизмы защиты от SQL-инъекций и других типичных уязвимостей, обеспечивая безопасность вашей базы данных.

## Какие сообщества развивают данную СУБД? Кто в проекте имеет права на коммит и создание дистрибутива версий? Расскажите об этих людей и/или компаниях.
Одним из ключевых участников сообщества Greenplum является компания Pivotal Software, которая в прошлом была владельцем проекта. Pivotal Software внесла значительный вклад в разработку Greenplum и продолжает поддерживать проект, выкладывая новые версии и обновления.

## Создайте свои собственные данные для демонстрации работы СУБД. 
Для создания собственных данных в Greenplum можно воспользоваться языком SQL. Ниже пример кода на SQL для создания таблицы и добавления данных в Greenplum:
```sql
-- Создание таблицы с образцовыми данными
CREATE TABLE sample_data (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50),
    age INT,
    address VARCHAR(100)
);

-- Вставка данных в таблицу
INSERT INTO sample_data (name, age, address)
VALUES ('John Doe', 30, '123 Main St'),
       ('Jane Smith', 25, '456 Elm St'),
       ('Alice Johnson', 35, '789 Oak St');
```

Также можно создать данные с помощью языка программирования, например, Python с использованием библиотеки psycopg2 для работы с PostgreSQL (на котором основан Greenplum). Пример создания данных с помощью Python:
```python
import psycopg2

conn = psycopg2.connect("dbname=mydb user=myuser password=mypassword")
cur = conn.cursor()

cur.execute("""
CREATE TABLE sample_data (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50),
    age INT,
    address VARCHAR(100)
)
""")

cur.execute("""
INSERT INTO sample_data (name, age, address)
VALUES ('John Doe', 30, '123 Main St'),
       ('Jane Smith', 25, '456 Elm St'),
       ('Alice Johnson', 35, '789 Oak St')
""")

conn.commit()
conn.close()
```

## Как продолжить самостоятельное изучение языка запросов с помощью демобазы. Если демобазы нет, то создайте ее.
Для самостоятельного изучения Greenplum можно использовать следующие ресурсы:
1. Официальная документация: изучите руководства, руководства пользователя, руководства администратора и другие материалы на сайте Pivotal Greenplum Database Documentation.
2. Видеоуроки: найдите обучающие видео на YouTube или других платформах. Многие пользователи и разработчики делятся своим опытом работы с Greenplum в видеоформате.
3. Онлайн-курсы: пройдите платные или бесплатные курсы на платформах обучения онлайн, таких как Coursera, Udemy, Pluralsight, LinkedIn Learning и другие.
4. Форумы и сообщества: присоединитесь к форумам и сообществам разработчиков, где можно задавать вопросы, обсуждать проблемы и делиться опытом с другими пользователями Greenplum.
5. Практические задания: создайте собственный проект на базе Greenplum, чтобы применить полученные знания на практике и углубить свое понимание системы.
6. Сертификация: рассмотрите возможность получения сертификата по Greenplum, который подтвердит ваши знания и навыки в области работы с этой технологией.

## Где найти документацию и пройти обучение
Документацию по Greenplum можно найти на официальном сайте разработчика Pivotal Software Inc. под именем 'Pivotal Greenplum Database Documentation'. Также множество образовательных ресурсов, курсов и тренингов о Greenplum можно найти на онлайн-платформах по обучению информационным технологиям, таких как Coursera, Udemy, Pluralsight и др. Кроме того, многие IT-компании предлагают обучающие курсы и сертификацию по Greenplum, поэтому можно поинтересоваться у своего работодателя о возможностях прохождения обучения.

## Как быть в курсе происходящего
Чтобы быть в курсе происходящего с Greenplum, рекомендуется следить за официальным сайтом Greenplum (https://greenplum.org/) и блогом Pivotal Greenplum (https://gpdb.docs.pivotal.io/). Также можно подписаться на новостные рассылки или следить за социальными медиа-аккаунтами Greenplum (например, на Twitter: @Greenplum).

Другие способы быть в курсе событий в мире Greenplum включают участие в вебинарах, конференциях или сообществе пользователей Greenplum. Общение с другими пользователями и специалистами также может помочь быть в курсе последних новостей и разработок в Greenplum.

# HW 3
- Создал БД и добавил запись
![Снимок экрана (5)](https://github.com/kazakovas73/sbt_db/assets/71931438/5641bc60-e0b8-4b7b-b0e8-ac960ef59cd3)

- Подключился к БД в коде
![Снимок экрана 2024-04-11 233219](https://github.com/kazakovas73/sbt_db/assets/71931438/ea735c7f-277a-4666-9421-257cafc64d7e)

- Проверил, что фамилия есть
![Снимок экрана (7)](https://github.com/kazakovas73/sbt_db/assets/71931438/0bf91868-e0c3-4bfe-b543-0d32c5d4e385)

- Остановил сервер
![Снимок экрана 2024-04-11 232935](https://github.com/kazakovas73/sbt_db/assets/71931438/9f4ce3b0-929e-40b4-8eff-0692ac8a3e8b)

- Проверил, что фамилия осталась
![Снимок экрана (8)](https://github.com/kazakovas73/sbt_db/assets/71931438/552c110f-74f9-4de7-b6d7-9bd57dfdb86f)


# HW 2
Сохранил большой JSON (>40МБ) в виде разных структур - строка, hset, zset, list и протестировал скорость сохранения и чтения
![image](https://github.com/kazakovas73/sbt_db/assets/71931438/bb01df59-ed81-4a73-acf0-430fdb2e6324)
По второй части задания: создал docker-compose файл из трех контейнеров, а также conf файл для redis, который содержит условия из задания.


# HW 1
Сначала я создал Dockerfile, который создает контейнер с образом mongo и скачал json датасет с песнями репера Дрейка. Потом создал контейнер из образа и запустил его, также запустил mongo shell, где подгрузил датасет и провел CRUD операции.

- docker build -t mongo .
<img width="518" alt="Снимок экрана 2024-03-13 191002" src="https://github.com/kazakovas73/sbt_db/assets/71931438/bda299ca-f480-4c4b-8da0-918c7920b3e5">

- docker run mongo
<img width="695" alt="Снимок экрана 2024-03-13 191016" src="https://github.com/kazakovas73/sbt_db/assets/71931438/aea778ec-f2b3-41da-97b7-33948cabba08">

- docker ps
<img width="608" alt="Снимок экрана 2024-03-13 191746" src="https://github.com/kazakovas73/sbt_db/assets/71931438/581bf9d5-0d44-4200-b5c4-4df0d57a75ea">

- docker exec -it 5158ab4ef2e9 /bin/bash
- mongoimport --jsonArray --db drake --collection drake_data --file drake_data.json
<img width="577" alt="Снимок экрана 2024-03-13 191453" src="https://github.com/kazakovas73/sbt_db/assets/71931438/72515ff6-7d83-4aef-9460-ead1d7041462">

- mongosh
<img width="700" alt="Снимок экрана 2024-03-13 191042" src="https://github.com/kazakovas73/sbt_db/assets/71931438/37790e7f-7998-4d6c-b72f-2e507c134874">

- use drake
- db.drake_data.findOne()
<img width="472" alt="Снимок экрана 2024-03-13 191913" src="https://github.com/kazakovas73/sbt_db/assets/71931438/cb30037b-88da-4e3e-b76f-6bc1a06a3e79">

- db.drake_data.insertOne({album: "New album", lyrics_title: "New song", lyrics_url: "google.com", lyrics: "ABC", track_views: "1"})
<img width="692" alt="Снимок экрана 2024-03-13 193405" src="https://github.com/kazakovas73/sbt_db/assets/71931438/cbbbf9f6-930d-4115-b6c9-36e042b0e701">

- db.drake_data.find({track_views: "1"})
<img width="261" alt="Снимок экрана 2024-03-13 193542" src="https://github.com/kazakovas73/sbt_db/assets/71931438/5121603b-c975-4f2b-b157-3793ec2a48ba">

- db.drake_data.updateOne({track_views: { $eq: "1" }}, { $set: { album: "Very new album" }})
<img width="543" alt="Снимок экрана 2024-03-13 193940" src="https://github.com/kazakovas73/sbt_db/assets/71931438/f2a3b717-83fc-403e-9ab3-1e97b09ba662">

- db.drake_data.deleteOne({track_views: "1"}) 
<img width="281" alt="Снимок экрана 2024-03-13 194100" src="https://github.com/kazakovas73/sbt_db/assets/71931438/315719fa-8a81-41fc-a2de-cfde69706487">

- db.drake_data.find({lyrics: {$regex: "my life and"}}).explain("executionStats")
- <img width="296" alt="Снимок экрана 2024-03-14 164613" src="https://github.com/kazakovas73/sbt_db/assets/71931438/1d4f58e7-7b13-4e15-8926-012f06cb9229">

- db.drake_data.createIndex({lyrics:1})
- У меня оказался слишком маленький датасет, поэтому executionTimeMillisEstimate одинаковый для операции find по конкрктному значению, а regex из прошлого пункта в 5 раз медленнее стал работать.


# HW 0
C - Consistency
A - Availability
P - Partition-tolerance

# DragonFly - CA
Dragonfly спроектирован для вертикального масштабирования на одной машине, что позволяет командам экономить затраты и усложнять управление многоузловым кластером. Для наборов данных в памяти объемом до 1 ТБ Dragonfly предлагает самое простое и надежное масштабирование на рынке.

# ArenadataDB - CP
С Arenadata DB вы построите надёжное, масштабируемое корпоративное хранилище данных, которое будет расти вместе с вашими потребностями. Arenadata DB реализована на кластере из множества (от двух до сотен) серверов и равномерно распределяет нагрузку и данные между ними. Полное соответствие принципам строгой изоляции транзакции (принципы ACID). Одни и те же таблицы могут быть использованы для записи и чтения, без страха потерять данные. Уровень изоляции транзакций — Serializable.

# ScyllaDB - AP
Любой узел может обслуживать любой запрос, нет единой точки координации, и все узлы в системе продолжают совместно предоставлять услуги, даже когда узлы становятся недоступными. Окончательная согласованность поддерживает современные рабочие нагрузки, которые в меньшей степени зависят от строгой согласованности, но в значительной степени зависят от доступности. Кластер ScyllaDB обеспечивает конечную согласованность. При окончательной согласованности все узлы реплики в конечном итоге придут к одному и тому же состоянию данных.
